<br>
<div  *ngIf="isme != true " class="timeonleft">{{msgitem.arrive_time|timeSwich}}</div>
<img  *ngIf="isme != true " class="headportraitonleft" src="{{img}}">
<!-- 左边文本 -->
<div *ngIf="msgitem.content_type == 0 && isme != true" class="content">
        <div class="bubble">
                <div class="bubble_cont">
                    <div class="plain">
                           <img *ngIf="-msgitem.id > 0" class="loadingonleft" src="../../assets/loading1.gif">
                            <div >{{msgitem.content}}</div>
                    </div>
                </div>
            </div>
</div>
<!-- 左边图片 -->
<div *ngIf="msgitem.content_type == 1 && isme != true" class="content">
    <div class="fileheadportraitonleft">
        <!-- <div class="picture" [ngStyle]="{ 'background-image': 'url('+msgitem.content+')'}"></div> -->
        <div class="picture" [ngStyle]="{ 'background-image': 'url('+msgitem.content+')'}"></div>
        <!-- <img class="picture" src="../chat/icon/RAR.png"> -->
        <div class="mask">
            <p (click)="showpicModal(msgitem.content)">查看原图</p>
        </div>
    </div>
</div>
<!-- 左边文件 -->
<div *ngIf="msgitem.content_type == 2 && isme != true" class="content">
    <div class="bubble">
        <div class="bubble_cont">
            <div class="attach">
                <div>
                    <div class="cover">
                        <img [src]="switchpng(msgitem.content)" class="pic">
                    </div>
                    <div class="cont">
                        <p class="title">{{getfilename(msgitem.content)}}</p>
                        <!-- <p class="title">调试文本.zip</p> -->
                        <div class="opr">
                            <span class="title">{{getFileSize(msgitem.content)}} </span>
                            <span>|</span>
                            <a class="a" (click)=" downloadFile(msgitem.content)"> 下载</a>
                            <!-- <nz-progress  [nzPercent]="70" nzSize="small" nzStatus="active" [nzStrokeColor]="green"></nz-progress> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- 左边视频 -->
<div *ngIf="msgitem.content_type == 3 && isme != true" class="content">
        <div class="bubble">
                <div class="bubble_cont">
                    <div class="attach">
                        <div>
                            <div class="cover">
                                <img [src]="switchpng(msgitem.content)" class="pic">
                            </div>
                            <div class="cont">
                                <p class="title">{{getvideoname(msgitem.content)}}</p>
                                <!-- <p class="title">调试文本.zip</p> -->
                                <div class="opr">
                                    <a class="a" (click)=" showvideoModal(msgitem.content)"> 播放</a>
                                    <!-- <nz-progress  [nzPercent]="70" nzSize="small" nzStatus="active" [nzStrokeColor]="green"></nz-progress> -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
</div>
<div  *ngIf="isme == true " class="timeonright"><span *ngIf="msgitem.id&&msgitem.id > 0">{{msgitem.arrive_time|timeSwich}}</span></div>
<img  *ngIf="isme == true " class="headportraitonright" src="{{img}}">
<!-- 右边文字 -->
<div *ngIf="msgitem.content_type == 0 && isme == true" class="content">
    <div class="bubblerightword">
        <div class="bubble_cont">
            <div class="plain">
                    <img *ngIf="!msgitem.id||msgitem.id == 0" class="loadingonright" src="../../assets/loading1.gif">
                    <div >{{msgitem.content}}</div>
            </div>
        </div>
    </div>

</div>
<!-- 右边图片 -->
<div *ngIf="msgitem.content_type == 1 && isme == true" class="content">
    <div class="fileheadportraitonright">
        <!-- <div class="picture" [ngStyle]="{ 'background-image': 'url('+item.content+')'}"></div> -->
        <div *ngIf="msgitem.id >0 " class="picture" [ngStyle]="{ 'background-image': 'url('+msgitem.content+')'}"></div>
        <div *ngIf="!msgitem.id >0 " class="pictureloading">
            <div >
                    <div class="windows8">
                            <div class="wBall" id="wBall_1">
                                <div class="wInnerBall"></div>
                            </div>
                            <div class="wBall" id="wBall_2">
                                <div class="wInnerBall"></div>
                            </div>
                            <div class="wBall" id="wBall_3">
                                <div class="wInnerBall"></div>
                            </div>
                            <div class="wBall" id="wBall_4">
                                <div class="wInnerBall"></div>
                            </div>
                            <div class="wBall" id="wBall_5">
                                <div class="wInnerBall"></div>
                            </div>
                        </div>
            </div>
        <img  [src]="msgitem.content">
        </div>
        <div *ngIf="msgitem.id >0 " class="mask">
            <p (click)="showpicModal(msgitem.content)">查看原图</p>
        </div>
    </div>

</div>
<!-- 右边文件 -->
<div *ngIf="msgitem.content_type == 2 && isme == true" class="content">
    <div class="bubbleright">
        <div class="bubble_cont">
            <div class="attach">
                <div>
                    <div class="cover">
                        <img [src]="switchpng(msgitem.content)" class="pic">
                    </div>
                    <div class="cont">
                        <p class="title">{{getfilename(msgitem.content)}}</p>
                        <!-- <p class="title">调试文本.zip</p> -->
                        <div class="opr">
                            <span class="title">{{getFileSize(msgitem.content)}} </span>
                            <span>|</span>
                            <a *ngIf="msgitem.loading_percent==100||msgitem.loading_percent==-1||msgitem.loading_percent==undefined" class="a" (click)=" downloadFile(msgitem.content)"> 下载</a>
                            <nz-progress *ngIf="msgitem.loading_percent != 100 && msgitem.loading_percent != -1 && msgitem.loading_percent != undefined " [nzPercent]="msgitem.loading_percent" nzSize="small" nzStatus="active" [nzStrokeColor]="green">
                            </nz-progress>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- 右边视频 -->
<div *ngIf="msgitem.content_type == 3 && isme == true" class="content">
        <div class="bubbleright">
                <div class="bubble_cont">
                    <div class="attach">
                        <div>
                            <div class="cover">
                                <img [src]="switchpng(msgitem.content)" class="pic">
                            </div>
                            <div class="cont">
                                <p class="title">{{getvideoname(msgitem.content)}}</p>
                                <!-- <p class="title">调试文本.zip</p> -->
                                <div class="opr">
                                    <a *ngIf="msgitem.loading_percent==100||msgitem.loading_percent==-1||msgitem.loading_percent==undefined" class="a" (click)=" showvideoModal(msgitem.content)"> 播放</a>
                                    <nz-progress *ngIf="msgitem.loading_percent != 100 && msgitem.loading_percent != -1 && msgitem.loading_percent != undefined " [nzPercent]="msgitem.loading_percent" nzSize="small" nzStatus="active" [nzStrokeColor]="green">
                                    </nz-progress>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    </div>






<!-- 显示图片与视频 -->
<!-- <nz-modal [(nzVisible)]="isshowpicVisible"   (nzOnCancel)="handleshowpicCancel()" (nzOnOk)="handleshowpicCancel()">
    <div class="picture2" [ngStyle]="{ 'background-image': 'url('+a+')'}"></div>
  </nz-modal> -->
  <nz-modal
        [nzVisible]="isshowpicVisible"
        [nzContent]="modalContent"
        [nzFooter]="null"
        (nzOnCancel)="handleshowpicCancel()"
      >
        <ng-template #modalContent>
          <img [src]="a" [ngStyle]="{ width: '100%' }" />
        </ng-template>
      </nz-modal>
  
  <nz-modal [(nzVisible)]="isshowvideoVisible"   (nzOnCancel)="handleshowvideoCancel()" (nzOnOk)="handleshowvideoCancel()">
      <div >
            <div >
                    <video [src]="videourl" controls="controls" #theVideo></video>
            </div>
          </div>
    </nz-modal>
  